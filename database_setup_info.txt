===============================================
年会抽奖系统 - 数据库部署信息
部署时间: 2025-12-16
===============================================

【容器状态】
✅ lottery-postgres (PostgreSQL 15)
   - 端口: 5432
   - 用户: lottery_user
   - 密码: lottery_pass
   - 数据库: lottery_db

✅ lottery-redis (Redis Alpine)
   - 端口: 6379
   - 无密码

【数据库初始化状态】
✅ Public Schema
   - tenant_registry (租户注册表)
   - system_config (系统配置表)
   - 系统配置: 13 条记录

✅ Tenant Demo Schema (tenant_demo)
   - users (用户表)
   - lottery_activities (抽奖活动表)
   - prizes (奖项表)
   - participants (参与人员表)
   - winner_records (中奖记录表)
   - operation_logs (操作日志表)

✅ 测试租户
   - 租户代码: demo
   - 租户名称: 演示租户
   - Schema: tenant_demo
   - 状态: ACTIVE

【常用命令】
# 查看容器状态
podman ps

# 查看 PostgreSQL 日志
podman logs lottery-postgres

# 连接数据库
podman exec -it lottery-postgres psql -U lottery_user -d lottery_db

# 查看所有 Schema
podman exec -i lottery-postgres psql -U lottery_user -d lottery_db -c "\dn"

# 查看租户列表
podman exec -i lottery-postgres psql -U lottery_user -d lottery_db -c "SELECT tenant_code, tenant_name, schema_name, status FROM public.tenant_registry;"

# Redis 测试
podman exec -i lottery-redis redis-cli PING

# 停止容器
podman stop lottery-postgres lottery-redis

# 启动容器
podman start lottery-postgres lottery-redis

# 删除容器（注意：会丢失数据）
podman rm -f lottery-postgres lottery-redis

【应用配置】
application.yml 数据库连接配置:
  datasource:
    url: jdbc:postgresql://localhost:5432/lottery_db?currentSchema=public
    username: lottery_user
    password: lottery_pass
  redis:
    host: localhost
    port: 6379

【下一步操作】
1. 启动后端服务: cd lottery-backend && mvn spring-boot:run
2. 启动前端服务: cd lottery-frontend && npm run dev
3. 通过应用注册新租户（会自动创建 tenant schema）

===============================================
